"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var e=t(require("mitt")),a=e(),n=function(){};n.init=function(){window.addEventListener("message",function(t){if(t.data&&t.data.type){var e={data:t.data.message,origin:t.origin,source:t.source};a.emit(t.data.type,e)}});this.postMessage({type:"iframe_mitt:ready",data:"ready"},"*")},n.postMessage=function(t,e,a){window.parent&&(window.console.info(t,e,a),window.parent.postMessage(t,e,a))},n.emit=function(t,e){var a=e.message,n=e.targetOrigin,i=e.transfer,s={type:t,message:a};this.postMessage(s,n,i)},n.on=function(t,e){a.on(t,e)},n.off=function(t,e){a.off(t,e)};var i=e(),s={window:null,callbacks:[],ready:function(t){return null===this.callbacks?t():this.callbacks.push(t)}},o=function(){};o.init=function(){window.addEventListener("message",function(t){if(t.data&&t.data.type)if("iframe_mitt:ready"===t.data.type){if(s.window=t.source,s.callbacks&&s.callbacks.length)for(;s.callbacks.length;)s.callbacks.shift()();s.callbacks=null}else{var e={data:t.data.message,origin:t.origin,source:t.source};i.emit(t.data.type,e)}},!1)},o.emit=function(t,e){var a=e.message,n=e.targetOrigin,i=e.transfer;s.ready(function(){var e={type:t,message:a};return window.console.info(e,n,i),s.window.postMessage(e,n,i)})},o.on=function(t,e){i.on(t,e)},o.off=function(t,e){i.off(t,e)};var r={Child:n,Parent:o};module.exports=r;